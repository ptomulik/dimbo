---
layout: post
title: "Introduced CxxTest framework"
description: ""
category: 
sidenav: home
tags: []
---
{% include JB/setup %}

I've just introduced the [CxxTest](http://cxxtest.com) framework to DIMBO.
In order to unit-test DIMBO one has to install [CxxTest](http://cxxtest.com) on
his development machine. On Debian, for example, this is as simple as

```console
apt-get install cxxtest
```

Unit tests may be performed with the `check` target, that is with the following
command

```console
scons -u check
```

Currently there are just few test cases. I plan to write more, but first have
to enable some test coverage machinery.

### How is this integrated with DIMBO?

Generation and compilation of the tests is driven by scons. For that a
[cxxtest scons tool](https://github.com/ptomulik/scons-tool-cxxtest) is used,
which is just a convenient to use in git-based projects version of the
[cxxtest build\_tool](https://github.com/CxxTest/cxxtest/blob/master/build_tools/SCons)
developed by Gašper Ažman et al. (big thanks!).

### How does this affect development?

I had to modify
[bin/addclass.py](https://github.com/ptomulik/dimbo/blob/master/bin/addclass.py)
script such that it's able to generate template of the unit test along with all
the other files that comprise the generated unit.

There is correspondence between source files and their unit test files, for
example:

<table border=1>
  <tr>
  <th>Source file</th>
  <th>Unit test</th>
  </tr>
  <tr>
  <td><tt>src/lib/dimbo/cl/cl_error.cpp</tt></td>
  <td><tt>src/lib/dimbo/test/unit/dimbo/cl/cl_error.t.h</tt></td>
  </tr>
</table>

Test unit skeleton files (`*.t.h`) are generated by default by the
`bin/addclass` script.

---
Paweł Tomulik

<!-- vim: set syntax=markdown: -->
